fuse:
  dir: "/litefs"

data:
  dir: "/var/lib/litefs"

lease:
  type: "static"
  advertise-url: $ADVERTISE_URL
  candidate: $IS_PRIMARY

# proxy:
#   addr: ":8080"
#   target: "localhost:8080"
#   db: "db"
#   passthrough:
#     - "*.ico"
#     - "*.png"

exec:
  # - cmd: "sh -c 'sqlite3 $(echo $DATABASE_URL | sed s/^sqlite://) \"VACUUM;\" && ls /litefs && flyway migrate -url=$DATABASE_URL -locations=filesystem:./migrations'"
  - cmd: "flyway migrate -url=$DATABASE_URL -locations=filesystem:./migrations"
    if-candidate: true

  - cmd: "java -jar httpServer.jar"
